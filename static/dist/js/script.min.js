document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('a[data-ajax="true"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();e=this.getAttribute("href");fetch(e).then(e=>e.text()).then(e=>{document.getElementById("main-content").innerHTML=e}).catch(e=>console.error("Error loading content:",e)),console.log(e)})});let t=document.querySelector("#terminal-output");io().on("log_message",function(e){t&&(t.innerHTML+=e.data+"\n",t.scrollTop=t.scrollHeight)}),document.getElementById("scrape-playlists")&&initScraperControls(),document.getElementById("prepare-data")&&initPreparationControls(),document.getElementById("start-training")&&initTrainingControls(),document.getElementById("generate-lyrics")&&initGenerationControls(),document.querySelector("#scrape-playlists")?.addEventListener("click",function(){fetch("/api/scrape/playlists").then(e=>e.json()).then(e=>console.log("Started playlist scraping"))}),document.querySelector("#scrape-songs")?.addEventListener("click",function(){fetch("/api/scrape/songs").then(e=>e.json()).then(e=>console.log("Started song scraping"))}),document.querySelector("#prepare-data")?.addEventListener("click",function(){fetch("/api/prepare").then(e=>e.json()).then(e=>console.log("Started data preparation"))}),document.querySelector("#start-training")?.addEventListener("click",function(){fetch("/api/train/start").then(e=>e.json()).then(e=>console.log("Started training"))}),document.querySelector("#generate-lyrics")?.addEventListener("click",function(){var e={model:document.querySelector("#generator-model").value,title:document.querySelector("#song-title").value,style:document.querySelector("#style-tags").value,prompt:document.querySelector("#generation-prompt").value};fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{document.querySelector("#generation-output").textContent=e.lyrics})}),fetch("/api/settings").then(e=>e.json()).then(e=>{Object.entries(e).forEach(([n,e])=>{Object.entries(e).forEach(([e,t])=>{e=document.querySelector(`[data-category="${n}"][data-key="${e}"]`);e&&("checkbox"===e.type?e.checked=t:e.value=t)})})}),document.getElementById("save-settings").addEventListener("click",function(){let o={};document.querySelectorAll("[data-category][data-key]").forEach(e=>{var t=e.dataset.category,n=e.dataset.key,e="checkbox"===e.type?e.checked:e.value;o[t]||(o[t]={}),o[t][n]=e}),fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(()=>UIkit.notification({message:"Settings saved successfully!",status:"success"}))}),document.getElementById("reset-settings").addEventListener("click",function(){confirm("Reset all settings to defaults?")&&fetch("/api/settings/reset").then(e=>e.json()).then(e=>{location.reload()})})});